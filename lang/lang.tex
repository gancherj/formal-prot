
\documentclass{article}
\usepackage{amsmath, amssymb, amsthm}
\usepackage{proof}
\usepackage{stmaryrd}
\usepackage{algorithm, algpseudocode}

\title {basic protocol formalism}
\begin{document}
\maketitle

Our data types will be required to be finite:

\[ \tau ::= \mathbb{Z}_{q} \mid \textsf{bool} \mid \tau \times \tau \mid \dots. \]

Additionally, assume some message spaces $I$ and $O$. (A possible choice for this is to have each party be indexed by a natural number, and let $I$ and $O$ be $\Sigma_{i \in \mathcal{I}} F(i)$, where $\mathcal{I}$ is a finite set of natural numbers, and $F$ is a function from natural numbers to message types $\tau$.)

Then, a process with state space $S$ is defined to be a pair $S \times (S \to I \to \mathcal{D}(S \times O))$.

We may ask if two processes $P$, $Q$ are behaviorally equivalent by first forming their disjoint union, where states of the disjoint union are pairs, and the handler pattern matches on the state to decide which handler to run. Then, we ask if the initial state of $P$ is bisimilar to the initial state of $Q$.

For a state $s$ in some process, write $s \xrightarrow{m} \mu$ to mean $\mu := \delta (s,m)$, where $\delta$ is the handler for that process. Then, we say that a relation $\sim$ over states is a \emph{bisimulation} if for any $s \sim t$,

\[ \forall m, \forall C \in S / \sim, \text{ if } s \xrightarrow{m} \mu \text{ and } t \xrightarrow{m} \eta \text{ then }  \forall m', \mu(m',C) = \eta(m',C),\]

where $\mu(m',C)$ is the probability that $\mu$ outputs a pair $m'', s'$ such that $m'' = m'$ and $s' \in C$.

\end{document}
